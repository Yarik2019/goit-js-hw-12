{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/success.svg","../src/img/caution.svg","../src/main.js"],"sourcesContent":["// import axios from 'axios';\n// axios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getPhotos(q, currentPage, perPage) {\n  const options = {\n    params: {\n      key: '45225008-7dd168b8c56fcbfbf82a602af',\n      q,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page: currentPage,\n      per_page: perPage,\n    },\n  };\n\n  // const { data } = await axios.get('', options);\n\n  // return data;\n}\n","function imageMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery\">\n            <a class=\"list\" href=\"${largeImageURL}\">\n              <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" />\n              <ul class=\"properties-list\">\n                <li>\n                  <p class=\"prop\">Likes</p>\n                  <p class=\"prop-value\">${likes}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Views</p>\n                  <p class=\"prop-value\">${views}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Comments</p>\n                  <p class=\"prop-value\">${comments}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Downloads</p>\n                  <p class=\"prop-value\">${downloads}</p>\n                </li>\n              </ul>\n            </a>\n          </li>`;\n}\n\nexport function imagesMarkup(array) {\n  return array.map(imageMarkup).join('');\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","export default \"__VITE_ASSET__e8e562d6__\"","export default \"__VITE_ASSET__02852ca5__\"","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { getPhotos } from './js/pixabay-api';\nimport { imagesMarkup } from './js/render-functions';\nimport iconError from './img/error.svg';\nimport iconSuccess from './img/success.svg';\nimport iconCaution from './img/caution.svg';\n\nconst formElement = document.querySelector('.js-form');\nconst ul = document.querySelector('.js-gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\nlet searchQuery;\nlet currentPage = 1;\nlet perPage = 15;\nlet numberOfPages = null;\n\nfunction showClassAdd(elem) {\n  elem.classList.add('hidden');\n}\n\nfunction hideClassRemove(elem) {\n  elem.classList.remove('hidden');\n}\n\nformElement.addEventListener('submit', onSearchGallery);\nloadBtn.addEventListener('click', OnLoadMore);\n\nasync function onSearchGallery(event) {\n  event.preventDefault();\n  ul.innerHTML = '';\n  currentPage = 1;\n  showClassAdd(loadBtn);\n\n  const formData = new FormData(formElement);\n  searchQuery = formData.get('search').trim();\n\n  if (searchQuery === '') {\n    return iziToastMessageError('The field cannot be empty!');\n  }\n\n  hideClassRemove(loader);\n\n  try {\n    const data = await getPhotos(searchQuery, currentPage);\n\n    if (data.hits.length === 0) {\n      return iziToastMessageError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n\n    if (data.totalHits !== 0) {\n      iziToastMessageSuccess(\n        `We found ${data.totalHits} images for your request!`\n      );\n    }\n\n    if (data.totalHits > 15) {\n      hideClassRemove(loadBtn);\n    }\n\n    numberOfPages = Math.ceil(data.totalHits / perPage);\n\n    ul.innerHTML = imagesMarkup(data.hits);\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    showClassAdd(loader);\n    event.target.reset();\n  }\n}\n\nasync function OnLoadMore() {\n  showClassAdd(loadBtn);\n  currentPage += 1;\n\n  hideClassRemove(loader);\n\n  try {\n    const data = await getPhotos(searchQuery, currentPage);\n    ul.insertAdjacentHTML('beforeend', imagesMarkup(data.hits));\n\n    lightbox.refresh();\n\n    if (currentPage < numberOfPages) {\n      hideClassRemove(loadBtn);\n    }\n\n    if (currentPage === numberOfPages) {\n      iziToastMessageWarning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    showClassAdd(loader);\n    scrollPage();\n  }\n}\n\nfunction scrollPage() {\n  const pictureHeight = ul.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: pictureHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction iziToastMessageError(message) {\n  return iziToast.error({\n    iconUrl: iconError,\n    title: 'Error',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n    message: message,\n  });\n}\n\nfunction iziToastMessageSuccess(message) {\n  return iziToast.success({\n    iconUrl: iconSuccess,\n    title: 'OK',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#59a10d',\n    position: 'topRight',\n    message: message,\n  });\n}\n\nfunction iziToastMessageWarning(message) {\n  return iziToast.warning({\n    iconUrl: iconCaution,\n    title: 'WARNING',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#09f',\n    position: 'topRight',\n    message: message,\n  });\n}\n"],"names":["getPhotos","q","currentPage","perPage","imageMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesMarkup","array","iconError","iconSuccess","iconCaution","formElement","ul","loader","loadBtn","lightbox","SimpleLightbox","searchQuery","numberOfPages","showClassAdd","elem","hideClassRemove","onSearchGallery","OnLoadMore","event","iziToastMessageError","data","iziToastMessageSuccess","error","iziToastMessageWarning","scrollPage","pictureHeight","message","iziToast"],"mappings":"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"}