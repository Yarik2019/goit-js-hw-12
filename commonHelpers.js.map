{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.svg","../src/img/success.svg","../src/img/caution.svg","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function getPhotos(q, currentPage, perPage = 15) {\n  const API_KEY = '45225008-7dd168b8c56fcbfbf82a602af';\n\n  try {\n    const response = await axios.get('', {\n      params: {\n        key: API_KEY,\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page: currentPage,\n        per_page: perPage,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.log(error.status);\n  }\n}\n","function imageMarkup({\n  webformatURL,\n  largeImageURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `<li class=\"gallery\">\n            <a class=\"list\" href=\"${largeImageURL}\">\n              <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" />\n              <ul class=\"properties-list\">\n                <li>\n                  <p class=\"prop\">Likes</p>\n                  <p class=\"prop-value\">${likes}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Views</p>\n                  <p class=\"prop-value\">${views}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Comments</p>\n                  <p class=\"prop-value\">${comments}</p>\n                </li>\n                <li>\n                  <p class=\"prop\">Downloads</p>\n                  <p class=\"prop-value\">${downloads}</p>\n                </li>\n              </ul>\n            </a>\n          </li>`;\n}\n\nexport function imagesMarkup(array) {\n  return array.map(imageMarkup).join('');\n}\n","export default \"__VITE_ASSET__8479b7dd__\"","export default \"__VITE_ASSET__e8e562d6__\"","export default \"__VITE_ASSET__02852ca5__\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getPhotos } from './js/pixabay-api';\nimport { imagesMarkup } from './js/render-functions';\n\nimport iconError from './img/error.svg';\nimport iconSuccess from './img/success.svg';\nimport iconCaution from './img/caution.svg';\n\nconst formElement = document.querySelector('.js-form');\nconst ul = document.querySelector('.js-gallery-list');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet searchQuery;\nlet currentPage = 1;\nlet numberOfPages = null;\nlet perPage = 15;\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction showBtn() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideBtn() {\n  loadBtn.classList.add('hidden');\n}\n\nformElement.addEventListener('submit', onSearchGallery);\nloadBtn.addEventListener('click', OnLoadMore);\n\nasync function onSearchGallery(event) {\n  event.preventDefault();\n  currentPage = 1;\n  hideBtn();\n  ul.innerHTML = '';\n  searchQuery = event.currentTarget.elements.search.value.trim();\n\n  if (searchQuery === '') {\n    return iziToastMessageError('The field cannot be empty!');\n  }\n\n  showLoader();\n\n  try {\n    const response = await getPhotos(searchQuery, currentPage, perPage);\n\n    if (response.hits.length === 0) {\n      return iziToastMessageError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n    }\n\n    if (response.totalHits !== 0) {\n      iziToastMessageSuccess(\n        `We found ${response.totalHits} images for your request!`\n      );\n    }\n\n    if (response.totalHits > 15) {\n      showBtn();\n    }\n\n    numberOfPages = Math.ceil(response.totalHits / perPage);\n\n    ul.innerHTML = imagesMarkup(response.hits);\n\n    lightbox.refresh();\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    event.target.reset();\n  }\n}\n\nasync function OnLoadMore() {\n  hideBtn();\n  currentPage += 1;\n\n  showLoader();\n\n  try {\n    const response = await getPhotos(searchQuery, currentPage, perPage);\n    ul.insertAdjacentHTML('beforeend', imagesMarkup(response.hits));\n\n    lightbox.refresh();\n\n    if (currentPage < numberOfPages) {\n      showBtn();\n    }\n\n    if (currentPage === numberOfPages) {\n      iziToastMessageWarning(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n    scrollPage();\n  }\n}\n\nfunction scrollPage() {\n  const pictureHeight = ul.firstElementChild.getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: pictureHeight * 2,\n    behavior: 'smooth',\n  });\n}\n\nfunction iziToastMessageError(message) {\n  return iziToast.error({\n    iconUrl: iconError,\n    title: 'Error',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#ef4040',\n    position: 'topRight',\n    message: message,\n  });\n}\n\nfunction iziToastMessageSuccess(message) {\n  return iziToast.success({\n    iconUrl: iconSuccess,\n    title: 'OK',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#59a10d',\n    position: 'topRight',\n    message: message,\n  });\n}\n\nfunction iziToastMessageWarning(message) {\n  return iziToast.warning({\n    iconUrl: iconCaution,\n    title: 'WARNING',\n    titleColor: '#fff',\n    messageColor: '#fff',\n    backgroundColor: '#09f',\n    position: 'topRight',\n    message: message,\n  });\n}\n"],"names":["axios","getPhotos","q","currentPage","perPage","API_KEY","error","imageMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","imagesMarkup","array","iconError","iconSuccess","iconCaution","formElement","ul","loader","loadBtn","lightbox","SimpleLightbox","searchQuery","numberOfPages","showLoader","hideLoader","showBtn","hideBtn","onSearchGallery","OnLoadMore","event","iziToastMessageError","response","iziToastMessageSuccess","iziToastMessageWarning","scrollPage","pictureHeight","message","iziToast"],"mappings":"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"}